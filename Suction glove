-- åŸºæœ¬æœå‹™èˆ‡ç©å®¶
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

-- GUI ä¸»é«”
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "MaolingHub"

-- ä¿®æ­£ï¼šä¸»æ¡†æ¶æ¨£å¼
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 450, 0, 350)
Frame.Position = UDim2.new(0.5, -225, 0.5, -175)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true

-- æ·»åŠ æ¼¸å±¤æ•ˆæœ
local gradient = Instance.new("UIGradient", Frame)
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 35)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(35, 35, 50))
}
gradient.Rotation = 45

-- æ·»åŠ å¤–ç™¼å…‰æ•ˆæœ
local stroke = Instance.new("UIStroke", Frame)
stroke.Color = Color3.fromRGB(100, 150, 255)
stroke.Thickness = 2
stroke.Transparency = 0.5

Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 15)

-- ä¿®æ­£ï¼šæ¨™é¡Œæ¨£å¼
local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, -80, 0, 50)
Title.Position = UDim2.new(0, 15, 0, 0)  -- å¾€ä¸Šç§»å‹•5åƒç´ åŸç‚º5
Title.BackgroundTransparency = 1
Title.Text = "âœ¨ è²“ç²çš„è…³æœ¬å€ âœ¨"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 22
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left

-- æ·»åŠ æ¨™é¡Œç™¼å…‰æ•ˆæœ
local titleStroke = Instance.new("UIStroke", Title)
titleStroke.Color = Color3.fromRGB(100, 150, 255)
titleStroke.Thickness = 1
titleStroke.Transparency = 0.3

-- ä¿®æ­£ï¼šé—œé–‰æŒ‰éˆ•æ¨£å¼å’ŒåŠŸèƒ½
local Close = Instance.new("TextButton", Frame)
Close.Size = UDim2.new(0, 35, 0, 35)
Close.Position = UDim2.new(1, -40, 0, 8)
Close.Text = "x"
Close.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.Font = Enum.Font.GothamBold
Close.TextSize = 18
Close.BorderSizePixel = 0

-- æ·»åŠ é—œé–‰æŒ‰éˆ•æ•ˆæœ
local closeGradient = Instance.new("UIGradient", Close)
closeGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(220, 60, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(180, 40, 40))
}

Instance.new("UICorner", Close).CornerRadius = UDim.new(0, 8)

-- ä¿®æ­£ï¼šé—œé–‰æŒ‰éˆ•åŠŸèƒ½
Close.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    _G.maolingHubLoaded = false -- é‡ç½®è¼‰å…¥ç‹€æ…‹
end)

-- ä¿®æ­£ï¼šæœ€å°åŒ–æŒ‰éˆ•æ¨£å¼
local Minimize = Instance.new("TextButton", Frame)
Minimize.Size = UDim2.new(0, 35, 0, 35)
Minimize.Position = UDim2.new(1, -80, 0, 8)
Minimize.Text = "â”€"
Minimize.BackgroundColor3 = Color3.fromRGB(100, 100, 120)
Minimize.TextColor3 = Color3.fromRGB(255, 255, 255)
Minimize.Font = Enum.Font.GothamBold
Minimize.TextSize = 16
Minimize.BorderSizePixel = 0

local minimizeGradient = Instance.new("UIGradient", Minimize)
minimizeGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(100, 100, 120)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 80, 100))
}

Instance.new("UICorner", Minimize).CornerRadius = UDim.new(0, 8)

-- ä¿®æ­£ï¼šå´é‚Šæ¬„ç‚ºå¯æ»¾å‹•
local SideBar = Instance.new("ScrollingFrame", Frame)
SideBar.Size = UDim2.new(0, 130, 1, -55)
SideBar.Position = UDim2.new(0, 5, 0, 50)
SideBar.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
SideBar.BorderSizePixel = 0
SideBar.ScrollBarThickness = 6
SideBar.CanvasSize = UDim2.new(0, 0, 0, 200)
SideBar.AutomaticCanvasSize = Enum.AutomaticSize.Y
SideBar.ScrollingDirection = Enum.ScrollingDirection.Y

-- æ·»åŠ å´é‚Šæ¬„æ¨£å¼
local sidebarGradient = Instance.new("UIGradient", SideBar)
sidebarGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 50)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(45, 45, 65))
}

Instance.new("UICorner", SideBar).CornerRadius = UDim.new(0, 10)

-- æ·»åŠ UIListLayoutåˆ°å´é‚Šæ¬„
local sidebarLayout = Instance.new("UIListLayout", SideBar)
sidebarLayout.Padding = UDim.new(0, 8)
sidebarLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- ä¿®æ­£ï¼šå…§å®¹å€åŸŸ
local Content = Instance.new("Frame", Frame)
Content.Size = UDim2.new(1, -145, 1, -55)
Content.Position = UDim2.new(0, 140, 0, 50)
Content.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
Content.BorderSizePixel = 0

local contentGradient = Instance.new("UIGradient", Content)
contentGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(50, 50, 75))
}

Instance.new("UICorner", Content).CornerRadius = UDim.new(0, 10)

-- ä¿®æ­£ï¼šç¸®å°åŠŸèƒ½çš„å°ºå¯¸
local isMinimized = false
local fullSize = UDim2.new(0, 450, 0, 350)
local miniSize = UDim2.new(0, 450, 0, 50)

Minimize.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    SideBar.Visible = not isMinimized
    Content.Visible = not isMinimized
    Frame.Size = isMinimized and miniSize or fullSize
end)

-- ä¿®æ­£ï¼šç°¡å–®é«˜äº®æ–‡å­—çš„åˆ†å€æŒ‰éˆ•æ¨£å¼
local function createSectionButton(text, order, parent)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0, 120, 0, 45)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(85, 85, 105)  -- æ¯”åŸæœ¬æ›´äº®çš„èƒŒæ™¯
    
    -- æœ€äº®çš„æ–‡å­—è¨­å®š
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)  -- ç´”ç™½è‰²
    btn.TextTransparency = 0  -- å®Œå…¨ä¸é€æ˜
    btn.Font = Enum.Font.GothamBold  -- ç²—é«”å­—
    btn.TextSize = 16  -- é©ä¸­å¤§å°
    btn.BorderSizePixel = 0
    
    -- ç§»é™¤æ¼¸å±¤ï¼Œä½¿ç”¨ç´”è‰²èƒŒæ™¯
    -- é€™æ¨£æ–‡å­—æœƒæ›´æ¸…æ¥š
    
    -- æ·»åŠ åœ“è§’
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)
    
    -- ç°¡åŒ–æé‚Š
    local btnStroke = Instance.new("UIStroke", btn)
    btnStroke.Color = Color3.fromRGB(150, 180, 255)
    btnStroke.Thickness = 1
    btnStroke.Transparency = 0.6
    
    -- ç°¡å–®hoveræ•ˆæœ
    btn.MouseEnter:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(105, 105, 125)  -- hoveræ™‚æ›´äº®
        btnStroke.Transparency = 0.3
    end)
    
    btn.MouseLeave:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(85, 85, 105)
        btnStroke.Transparency = 0.6
    end)
    
    return btn
end


-- ä¿®æ­£ï¼šç°¡å–®é«˜äº®æ–‡å­—çš„ä¸€èˆ¬æŒ‰éˆ•æ¨£å¼
local function createButton(text, order, parent, spacing)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0, 180, 0, 35)
    btn.Position = UDim2.new(0.5, -90, 0, 10 + (order - 1) * spacing)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)  -- æ¯”åŸæœ¬æ›´äº®çš„èƒŒæ™¯
    
    -- æœ€äº®çš„æ–‡å­—è¨­å®š
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)  -- ç´”ç™½è‰²
    btn.TextSize = 16  -- é©ä¸­å¤§å°
    btn.Font = Enum.Font.GothamBold  -- ç²—é«”å­—
    btn.BorderSizePixel = 0
    
    -- ç§»é™¤æ¼¸å±¤ï¼Œä½¿ç”¨ç´”è‰²èƒŒæ™¯è®“æ–‡å­—æ›´æ¸…æ¥š
    
    -- æ·»åŠ åœ“è§’
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
    
    -- ç°¡åŒ–æé‚Š
    local btnStroke = Instance.new("UIStroke", btn)
    btnStroke.Color = Color3.fromRGB(120, 170, 255)
    btnStroke.Thickness = 1
    btnStroke.Transparency = 0.6
    
    -- ç°¡å–®hoveræ•ˆæœ
    btn.MouseEnter:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(100, 160, 240)  -- hoveræ™‚æ›´äº®
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)  -- ä¿æŒç´”ç™½
        btnStroke.Transparency = 0.3
    end)
    
    btn.MouseLeave:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)  -- ä¿æŒç´”ç™½
        btnStroke.Transparency = 0.6
    end)
    
    return btn
end


-- æ·»åŠ æ»¾å‹•æ¡†æ¨£å¼æ”¹å–„
local function styleScrollFrame(scrollFrame)
    scrollFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 65)
    scrollFrame.BorderSizePixel = 0
    scrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
    
    local scrollGradient = Instance.new("UIGradient", scrollFrame)
    scrollGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(45, 45, 65)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(55, 55, 80))
    }
    
    Instance.new("UICorner", scrollFrame).CornerRadius = UDim.new(0, 8)
end

-- æ–°å¢ï¼šé¦¬æ¡¶å¡åŠŸèƒ½ç›¸é—œä»£ç¢¼
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

-- ç¬¬ä¸€æ­¥ï¼šé€²å…¥é‡åŠ›è·‘é…·ï¼ˆè§¸ç™¼å‰å…©å€‹é»æ“Šï¼‰
local function enterGravityParkour()
    local success, err = pcall(function()
        -- æª¢æŸ¥ç¬¬ä¸€å€‹ç›®æ¨™æ˜¯å¦å­˜åœ¨
        local bountyHunterRoom = Workspace:FindFirstChild("BountyHunterRoom")
        if bountyHunterRoom then
            local plungerMain = bountyHunterRoom:FindFirstChild("PlungerMain")
            if plungerMain and plungerMain:FindFirstChild("ClickDetector") then
                -- è§¸ç™¼ç¬¬ä¸€å€‹é»æ“Š
                fireclickdetector(plungerMain.ClickDetector)
                print("è§¸ç™¼ç¬¬ä¸€å€‹é»æ“ŠæˆåŠŸ")
                wait(0.5)
            else
                print("æ‰¾ä¸åˆ° PlungerMain æˆ– ClickDetector")
            end
        else
            print("æ‰¾ä¸åˆ° BountyHunterRoom")
        end
        
        -- æª¢æŸ¥ç¬¬äºŒå€‹ç›®æ¨™æ˜¯å¦å­˜åœ¨
        local plungers = Workspace:FindFirstChild("plungers")
        if plungers then
            local toiletPlunger = plungers:FindFirstChild("ToiletPlunger")
            if toiletPlunger and toiletPlunger:FindFirstChild("ClickDetector") then
                -- è§¸ç™¼ç¬¬äºŒå€‹é»æ“Š
                fireclickdetector(toiletPlunger.ClickDetector)
                print("è§¸ç™¼ç¬¬äºŒå€‹é»æ“ŠæˆåŠŸï¼Œæ­£åœ¨å‚³é€åˆ°æ–°ä¼ºæœå™¨...")
                
                -- ç­‰å¾…å‚³é€ï¼ˆé€šå¸¸é»æ“Šå¾Œæœƒè‡ªå‹•å‚³é€ï¼‰
                wait(2)
            else
                print("æ‰¾ä¸åˆ° ToiletPlunger æˆ– ClickDetector")
            end
        else
            print("æ‰¾ä¸åˆ° plungers")
        end
    end)
    
    if not success then
        print("é€²å…¥é‡åŠ›è·‘é…·å¤±æ•—: " .. tostring(err))
    end
end

-- ç¬¬äºŒæ­¥ï¼šé»æ“Šç²å–æ‰‹å¥—ï¼ˆåœ¨æ–°ä¼ºæœå™¨ä¸­åŸ·è¡Œï¼‰
local function clickGetGlove()
    local success, err = pcall(function()
        local attempts = 0
        local maxAttempts = 50
        local found = false
        
        -- æŒçºŒå°‹æ‰¾é¦¬æ¡¶å¡æ‰‹å¥—
        while attempts < maxAttempts and not found do
            attempts = attempts + 1
            
            local plungerGlove = Workspace:FindFirstChild("plunger glove")
            if plungerGlove and plungerGlove:FindFirstChild("ClickDetector") then
                fireclickdetector(plungerGlove.ClickDetector)
                print("æˆåŠŸç²å–é¦¬æ¡¶å¡æ‰‹å¥—ï¼")
                found = true
                break
            end
            
            wait(0.1)  -- æ¯0.1ç§’æª¢æŸ¥ä¸€æ¬¡
        end
        
        if not found then
            print("åœ¨ " .. maxAttempts .. " æ¬¡å˜—è©¦å¾Œæ‰¾ä¸åˆ°é¦¬æ¡¶å¡æ‰‹å¥—")
        end
    end)
    
    if not success then
        print("é»æ“Šç²å–æ‰‹å¥—å¤±æ•—: " .. tostring(err))
    end
end

-- å‰µå»ºé¦¬æ¡¶å¡åˆ†å€
local plungerSection = createSectionButton("ğŸª é¦¬æ¡¶å¡", 1, SideBar)

-- å‰µå»ºé¦¬æ¡¶å¡å…§å®¹å€åŸŸ
local plungerContent = Instance.new("ScrollingFrame", Content)
plungerContent.Size = UDim2.new(1, 0, 1, 0)
plungerContent.Position = UDim2.new(0, 0, 0, 0)
plungerContent.BackgroundTransparency = 1
plungerContent.BorderSizePixel = 0
plungerContent.ScrollBarThickness = 6
plungerContent.CanvasSize = UDim2.new(0, 0, 0, 200)
plungerContent.AutomaticCanvasSize = Enum.AutomaticSize.Y
plungerContent.ScrollingDirection = Enum.ScrollingDirection.Y
plungerContent.Visible = false

styleScrollFrame(plungerContent)

-- å‰µå»ºå…©å€‹åˆ†é–‹çš„æŒ‰éˆ•
local enterParkourBtn = createButton("é€²å…¥é‡åŠ›è·‘é…·", 1, plungerContent, 50)
local getGloveBtn = createButton("é»æ“Šç²å–æ‰‹å¥—", 2, plungerContent, 50)

-- é€£æ¥æŒ‰éˆ•åŠŸèƒ½
enterParkourBtn.MouseButton1Click:Connect(function()
    enterGravityParkour()
end)

getGloveBtn.MouseButton1Click:Connect(function()
    clickGetGlove()
end)

-- åˆ†å€åˆ‡æ›åŠŸèƒ½
local currentSection = nil
local sections = {
    {button = plungerSection, content = plungerContent, name = "plunger"}
}

-- åˆ‡æ›åˆ°æŒ‡å®šåˆ†å€
local function switchToSection(sectionName)
    -- éš±è—æ‰€æœ‰å…§å®¹
    for _, section in pairs(sections) do
        section.content.Visible = false
        section.button.BackgroundColor3 = Color3.fromRGB(85, 85, 105)
    end
    
    -- é¡¯ç¤ºæŒ‡å®šåˆ†å€
    for _, section in pairs(sections) do
        if section.name == sectionName then
            section.content.Visible = true
            section.button.BackgroundColor3 = Color3.fromRGB(105, 105, 125)
            currentSection = sectionName
            break
        end
    end
end

-- é€£æ¥åˆ†å€æŒ‰éˆ•
plungerSection.MouseButton1Click:Connect(function()
    switchToSection("plunger")
end)

-- é è¨­é¡¯ç¤ºé¦¬æ¡¶å¡åˆ†å€
switchToSection("plunger")
